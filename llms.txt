# BiocBuildDB

BiocBuildDB is an R package that provides tools for managing and
querying a database of Bioconductor build reports. These reports contain
information about the build status of Bioconductor packages across
different platforms and R versions.

## Data flow

Each day, the Bioconductor build reports are processed to generate
structured tables of build results. These tables are stacked to generate
a longitudinal record of build results available as parquet files. The
data flow for the entire process is outlined in the diagram below.

``` mermaid
flowchart TD
    %% =========================
    %% Phase A: Daily extraction
    %% =========================
    A[Bioconductor<br/>Daily Build Reports]
        -->|daily| B[Parse & Normalize<br/>Build Metadata]

    B -->|md5 hashed<br/>by build report| C1[info.csv]
    B -->|md5 hashed<br/>by build report| C2[build_summary.csv]
    B -->|md5 hashed<br/>by build report| C3[propagation_status.csv]

    %% =========================
    %% Phase B: Longitudinal stacking
    %% =========================
    C1 -->|append new report| D1[info.parquet<br/>partitioned by date]
    C2 -->|append new report| D2[build_summary.parquet<br/>partitioned by date]
    C3 -->|append new report| D3[propagation_status.parquet<br/>partitioned by date]

    %% =========================
    %% Storage layer
    %% =========================
    D1 --> E[(Object Storage\nS3 / GCS)]
    D2 --> E
    D3 --> E

    %% =========================
    %% Storage layer
    %% =========================
    E -->|Usage| U[BiocBuildDB R Package]
    E -->|Usage| DASH[Third party dashboards]
    E -->|Usage| ANALYSIS[Analytics]


    %% =========================
    %% Styling
    %% =========================
    classDef source fill:#eef,stroke:#446;
    classDef daily fill:#efe,stroke:#484;
    classDef parquet fill:#ffe,stroke:#aa4;
    classDef storage fill:#fdf6e3,stroke:#b58900;

    class A source;
    class C1,C2,C3 daily;
    class D1,D2,D3 parquet;
    class E storage;
```

## Installation

You can install the development version of BiocBuildDB from
[GitHub](https://github.com/) with:

``` r
# install.packages("BiocManager")
BiocManager("seandavi/BiocBuildDB")
```

## Basic Usage

See the vignettes for detailed examples on how to use BiocBuildDB to
query and analyze Bioconductor build reports.

# Package index

## All functions

- [`.bbs_cache`](https://seandavi.github.io/BiocBuildDB/reference/bbs_cache.md)
  : Custom Environment to store downloaded parquet tibbles.
- [`current_report_tgz_links()`](https://seandavi.github.io/BiocBuildDB/reference/current_report_tgz_links.md)
  : Get links for all current report.tgz
- [`example_report_tgz()`](https://seandavi.github.io/BiocBuildDB/reference/example_report_tgz.md)
  : An example report.tgz file for testing
- [`get_all_bbs_tables()`](https://seandavi.github.io/BiocBuildDB/reference/get_all_bbs_tables.md)
  : Retrieve all available Bioconductor build system parquet files
- [`get_bbs_table()`](https://seandavi.github.io/BiocBuildDB/reference/get_bbs_table.md)
  : Retrieve a remotely read parquet file of Bioconductor build data
- [`get_build_report()`](https://seandavi.github.io/BiocBuildDB/reference/get_build_report.md)
  : Get a report for any given day from the Bioconductor Build System
- [`get_build_summary_table()`](https://seandavi.github.io/BiocBuildDB/reference/get_build_summary_table.md)
  : Extract build_summary table from an extracted report tarball
- [`get_failing_packages()`](https://seandavi.github.io/BiocBuildDB/reference/get_failing_packages.md)
  : Get list of failing packages for the most recent build
- [`get_info_table()`](https://seandavi.github.io/BiocBuildDB/reference/get_info_table.md)
  : Extract info table from an extracted report tarball
- [`get_latest_branches()`](https://seandavi.github.io/BiocBuildDB/reference/get_latest_branches.md)
  : Get currently active Bioconductor git branches
- [`get_package_build_results()`](https://seandavi.github.io/BiocBuildDB/reference/get_package_build_results.md)
  : Get the most recent build result data for a given package on a given
  branch
- [`get_package_release_info()`](https://seandavi.github.io/BiocBuildDB/reference/get_package_release_info.md)
  : Get git information for a given package across all Bioconductor
  releases
- [`get_propagation_status_table()`](https://seandavi.github.io/BiocBuildDB/reference/get_propagation_status_table.md)
  : Extract propagation status table from an extracted report tarball
- [`last_modified_date()`](https://seandavi.github.io/BiocBuildDB/reference/last_modified_date.md)
  : Get the last_modified_date for a Bioconductor URL
- [`localize_all_new_reports()`](https://seandavi.github.io/BiocBuildDB/reference/localize_all_new_reports.md)
  : Localize any new reports to a local directory
- [`localize_report_tgz()`](https://seandavi.github.io/BiocBuildDB/reference/localize_report_tgz.md)
  : Localize a report.tgz file to a local directory
- [`package_error_count()`](https://seandavi.github.io/BiocBuildDB/reference/package_error_count.md)
  : Get a count of how many time a package failed on the Bioconductor
  Build System
- [`package_failures_over_time()`](https://seandavi.github.io/BiocBuildDB/reference/package_failures_over_time.md)
  : Get rough timeline overview of package failing events
- [`process_all_new_reports()`](https://seandavi.github.io/BiocBuildDB/reference/process_all_new_reports.md)
  : Get and process all new build reports
- [`report_last_mod_db()`](https://seandavi.github.io/BiocBuildDB/reference/report_last_mod_db.md)
  : read a little file-based database of last-modified dates for reports
- [`reports_last_mod_table()`](https://seandavi.github.io/BiocBuildDB/reference/reports_last_mod_table.md)
  : Get the last_modified_date for all current report.tgz
- [`tables_from_report_dir()`](https://seandavi.github.io/BiocBuildDB/reference/tables_from_report_dir.md)
  : Create tables for a report directory
- [`untar_report_tgz()`](https://seandavi.github.io/BiocBuildDB/reference/untar_report_tgz.md)
  : Untar a report.tgz file and return a simple \`report_dir\` object
- [`write_tables_to_files()`](https://seandavi.github.io/BiocBuildDB/reference/write_tables_to_files.md)
  : Write tables to files based on md5 naming

# Articles

### All vignettes

- [BiocBuildDB Data Use
  Cases](https://seandavi.github.io/BiocBuildDB/articles/BiocBuildDB-use-cases.md):
- [Building and Processing BiocBuildDB
  Reports](https://seandavi.github.io/BiocBuildDB/articles/build-reports.md):
