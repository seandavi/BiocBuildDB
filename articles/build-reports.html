<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Building and Processing BiocBuildDB Reports • BiocBuildDB</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="build-reports_files/libs/quarto-html/popper.min.js"></script><script src="build-reports_files/libs/quarto-html/tippy.umd.min.js"></script><link href="build-reports_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="build-reports_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Building and Processing BiocBuildDB Reports">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-KLLV1GCF4E"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KLLV1GCF4E');
</script><!-- Google tag (gtag.js) -->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BiocBuildDB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BiocBuildDB-use-cases.html">BiocBuildDB Data Use Cases</a></li>
    <li><a class="dropdown-item" href="../articles/build-reports.html">Building and Processing BiocBuildDB Reports</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Building and Processing BiocBuildDB Reports</h1>

      <p class="author">Sean Davis</p>
      <p class="date">2025-12-31</p>


      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>BiocBuildDB</code> package provides functionality to process build reports generated by the Bioconductor build system. These reports are typically created during the continuous integration and testing of Bioconductor packages.</p>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p>This vignette documents INTERNAL functionality of the <code>BiocBuildDB</code> and is, in general, not intended for end users.</p>
<p>In general, the build report processing is not something that an end user will need to pay any attention to. However, the automation and processing scripts are also included in the package directory and detailed below.</p>
</blockquote>
</div>
</section><section class="level2"><h2 id="build-report-processing">Build report processing<a class="anchor" aria-label="anchor" href="#build-report-processing"></a>
</h2>
<p>To process all new build reports (those that changed since the last processing), you can use the following code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://seandavi.github.io/BiocBuildDB/">BiocBuildDB</a></span><span class="op">)</span></span>
<span><span class="va">reportdb_filename</span> <span class="op">=</span> <span class="st">'reportdb.csv'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">'report_dir'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/process_all_new_reports.html">process_all_new_reports</a></span><span class="op">(</span><span class="va">reportdb_filename</span>, <span class="st">'report_dir'</span><span class="op">)</span></span></code></pre></div>
</div>
<p>If the <code>reportdb.csv</code> file does not exist, it will be created. If it does exist, it will be read and updated after successfully localizing (copying) the new report.tgz files to the <code>report_dir</code> directory.</p>
<p>The <code>process_all_new_reports</code> function will untar each report.tgz file and create a set of tables from the report directory. The tables will be written to files in the <code>report_dir</code> directory with the md5 hash of the report directory as a prefix.</p>
<p>The result will be a <code>report_dir</code> directory with a set of csv files containing the tables from the report directories as well as the <code>report.tgz</code> files. Related files are named with the same md5 hash prefix of the report.tgz file.</p>
<p>An example resulting directory might look like:</p>
<pre><code>-rw-r--r--  1 seandavis  staff   472K Feb  2 11:20 2cc2a659a35d607f71655f3c9c9e4283-build_summary.csv.gz
-rw-r--r--  1 seandavis  staff    87K Feb  2 11:20 2cc2a659a35d607f71655f3c9c9e4283-info.csv.gz
-rw-r--r--  1 seandavis  staff    37K Feb  2 11:20 2cc2a659a35d607f71655f3c9c9e4283-propagation_status.csv.gz
-rw-r--r--  1 seandavis  staff    50M Feb  2 11:18 2cc2a659a35d607f71655f3c9c9e4283-report.tgz
-rw-r--r--  1 seandavis  staff   2.9K Feb  2 11:20 2e6b75f554d439ba3dc993e77862a973-build_summary.csv.gz
-rw-r--r--  1 seandavis  staff   2.2K Feb  2 11:20 2e6b75f554d439ba3dc993e77862a973-info.csv.gz
-rw-r--r--  1 seandavis  staff   514B Feb  2 11:20 2e6b75f554d439ba3dc993e77862a973-propagation_status.csv.gz
-rw-r--r--  1 seandavis  staff   202K Feb  2 11:18 2e6b75f554d439ba3dc993e77862a973-report.tgz
-rw-r--r--  1 seandavis  staff   497K Feb  2 11:20 354e509ee0e71215f7669fda8bad0246-build_summary.csv.gz
-rw-r--r--  1 seandavis  staff    94K Feb  2 11:20 354e509ee0e71215f7669fda8bad0246-info.csv.gz
-rw-r--r--  1 seandavis  staff    40K Feb  2 11:20 354e509ee0e71215f7669fda8bad0246-propagation_status.csv.gz
-rw-r--r--  1 seandavis  staff    70M Feb  2 11:18 354e509ee0e71215f7669fda8bad0246-report.tgz</code></pre>
<p><strong>After running this, you may want to sync the <code>report_dir</code> directory with a cloud storage service such as Amazon S3 or Google Cloud Storage for safe keeping.</strong></p>
</section><section class="level2"><h2 id="work-with-a-report-tgz-file-just-fyi">Work with a report.tgz file (just FYI)<a class="anchor" aria-label="anchor" href="#work-with-a-report-tgz-file-just-fyi"></a>
</h2>
<p>You shouldn’t need to use this functionality directly, but it is here to show how the package works and some example output in the tables.</p>
<p>Show an example of how to work with a report.tgz file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://seandavi.github.io/BiocBuildDB/">BiocBuildDB</a></span><span class="op">)</span></span>
<span><span class="va">report_tgz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/example_report_tgz.html">example_report_tgz</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">report_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/untar_report_tgz.html">untar_report_tgz</a></span><span class="op">(</span><span class="va">report_tgz</span><span class="op">)</span></span>
<span><span class="va">summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_build_summary_table.html">get_build_summary_table</a></span><span class="op">(</span><span class="va">report_dir</span><span class="op">)</span></span>
<span><span class="va">info_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_info_table.html">get_info_table</a></span><span class="op">(</span><span class="va">report_dir</span><span class="op">)</span></span>
<span><span class="va">prop_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_propagation_status_table.html">get_propagation_status_table</a></span><span class="op">(</span><span class="va">report_dir</span><span class="op">)</span></span></code></pre></div>
</div>
<p>Show the first few rows of each table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  package     node  stage version status startedat           endedat
  &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;dttm&gt;              &lt;dttm&gt;
1 AHCytoBands nebb… buil… 0.99.1  OK     2024-01-17 10:31:13 2024-01-17 10:31:14
2 AHCytoBands nebb… chec… 0.99.1  OK     2024-01-17 10:35:23 2024-01-17 10:35:31
3 AHCytoBands nebb… inst… 0.99.1  OK     2024-01-17 10:30:08 2024-01-17 10:30:11
4 AHEnsDbs    nebb… buil… 1.1.10  OK     2024-01-17 10:31:13 2024-01-17 10:32:01
5 AHEnsDbs    nebb… chec… 1.1.10  OK     2024-01-17 10:35:23 2024-01-17 10:37:24
6 AHEnsDbs    nebb… inst… 1.1.10  OK     2024-01-17 10:30:23 2024-01-17 10:30:49
# ℹ 2 more variables: command &lt;chr&gt;, report_md5 &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "package"    "node"       "stage"      "version"    "status"
[6] "startedat"  "endedat"    "command"    "report_md5"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">info_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  Package  Version Maintainer MaintainerEmail git_url git_branch git_last_commit
  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;
1 AHCytoB… 0.99.1  Michael L… michafla at ge… https:… RELEASE_3… 821428c
2 AHEnsDbs 1.1.10  Johannes … johannes.raine… https:… RELEASE_3… 1cf652d
3 AHLRBas… 0.99.3  Koki Tsuy… k.t.the-answer… https:… RELEASE_3… c0e6555
4 AHMeSHD… 0.99.6  Koki Tsuy… k.t.the-answer… https:… RELEASE_3… 052e156
5 AHPathb… 0.99.5  Kozo Nish… kozo.nishida a… https:… RELEASE_3… a90bfd4
6 AHPubMe… 0.99.8  Koki Tsuy… k.t.the-answer… https:… RELEASE_3… f43d98f
# ℹ 2 more variables: git_last_commit_date &lt;dttm&gt;, report_md5 &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">info_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Package"              "Version"              "Maintainer"
[4] "MaintainerEmail"      "git_url"              "git_branch"
[7] "git_last_commit"      "git_last_commit_date" "report_md5"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">prop_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  package       process propagate                                     report_md5
  &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                                         &lt;chr&gt;
1 AHCytoBands   source  UNNEEDED, same version is already published   f8fd2897c…
2 AHEnsDbs      source  UNNEEDED, same version is already published   f8fd2897c…
3 AHLRBaseDbs   source  NO, version to propagate (0.99.3) is lower t… f8fd2897c…
4 AHMeSHDbs     source  NO, version to propagate (0.99.6) is lower t… f8fd2897c…
5 AHPathbankDbs source  UNNEEDED, same version is already published   f8fd2897c…
6 AHPubMedDbs   source  NO, version to propagate (0.99.8) is lower t… f8fd2897c…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">prop_df</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "package"    "process"    "propagate"  "report_md5"</code></pre>
</div>
</div>
<p>Present a histogram of build times (in seconds) for the packages in the example build report.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">summary_df</span><span class="op">$</span><span class="va">endedat</span> <span class="op">-</span> <span class="va">summary_df</span><span class="op">$</span><span class="va">startedat</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="build-reports_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sean Davis, Lori Shepherd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
